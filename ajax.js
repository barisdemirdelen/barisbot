sent = 1;var xmlHttp = createXmlHttpRequestObject();function createXmlHttpRequestObject() {    var xmlHttp;    if (window.XMLHttpRequest) {        try {            xmlHttp = new XMLHttpRequest();        } catch (e) {            xmlHttp = false;        }    } else {        try {            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");        } catch (e) {            xmlHttp = false;        }    }    if (!xmlHttp) {        alert("Error creating the XMLHttpRequest object.");        return null;    } else {        return xmlHttp;    }}function process() {    var msg = document.getElementById("message").value;    document.getElementById("message").value = "";    var message;    if (msg != "" && msg != null) {        document.getElementById("divMessage").innerHTML = "<div class='rightBubble'><p>" + msg + "</p></div>" + document.getElementById("divMessage").innerHTML;        if (xmlHttp.readyState == 4 || xmlHttp.readyState == 0) {            message = encodeURIComponent(msg);            xmlHttp.open("GET", "ajax.php?sent=" + sent + "&message=" + message, true);            xmlHttp.onreadystatechange = function () {                var response;                var received;                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {                    response = xmlHttp.responseText;                    received = response.substring(response.indexOf(" ") + 1);                    document.getElementById("divMessage").innerHTML = "<div class='leftBubble'><p>" + received + "</p></div>" + document.getElementById("divMessage").innerHTML;                }            };            xmlHttp.send();        } else {            setTimeout('process()', 1000);        }    }}